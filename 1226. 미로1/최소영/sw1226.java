package week1;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class sw1226 {
	private static boolean[][] visit;

	public static void main(String[] args) throws IOException {
		// TODO Auto-generated method stub
		ClassLoader cloader = sw1226.class.getClassLoader();

		char[][] MAZE = new char[16][16];
		File file = new File(cloader.getResource("week1/input.txt").getFile());
		try {
			FileReader filereader = new FileReader(file);
			BufferedReader br = new BufferedReader(new InputStreamReader(System.in));// 이 경로에 있는 txt파일
																// 받아옴
			String line = null;
			String TC = null;
			for (int testCase = 0; testCase < 10; testCase++) {// test case
				TC = br.readLine();
				visit = new boolean[16][16];
				for (int i = 0; i < 16; i++) {
					line = br.readLine();
					MAZE[i] = line.toCharArray();

				}
				startPoint(MAZE);
				if (check) {
					System.out.println("#" + TC + " 1");
				} else {
					System.out.println("#" + TC + " 0");
				}
			}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}

	private static int X = -1;
	private static int Y = -1;
	private static boolean check = false;

	private static void startPoint(char[][] maze) {
		for (int i = 0; i < 16; i++) {
			for (int j = 0; j < 16; j++) {
				if (maze[i][j] == '2') {
					X = i;
					Y = j;
					check = find(X, Y,maze);
					break;
				}
			}
		}
	}

	private static boolean find(int x, int y,char[][]maze) {

		int xi = x;
		int yi = y;
		char[][] temp = maze;
		if(x+1>=16 ||maze[x][y] == '1'||visit[x][y]||y+1>=16||x<0||y<0){			
			return false;
		}
		if (maze[x][y] == '3') {
			return true;
		}
		
		visit[x][y] = true;
		if(find(x+1,y,maze)||find(x,y+1,maze)||find(x,y-1,maze)||find(x-1,y,maze)){
			return true;
		}
		return false;
	}
}
/*
 * 
INPUT
 
1
1111111111111111
1210000000100011
1010101110101111
1000100010100011
1111111010101011
1000000010101011
1011111110111011
1010000010001011
1010101111101011
1010100010001011
1010111010111011
1010001000100011
1011101111101011
1000100000001311
1111111111111111
1111111111111111
2
1111111111111111
1200000010000011
1011111011111011
1000001010000011
1110101010111011
1010101010100011
1011111010111111
1000001010000011
1011101011111011
1010101010000011
1010101010111111
1010100000130011
1010111111111011
1000000000000011
1111111111111111
1111111111111111
3
1111111111111111
1210001000100011
1010101010101011
1000100010101011
1011111110101011
1000001010101011
1111101010101011
1010001000001011
1010111111111011
1010000000100011
1011111110101111
1000001010100011
1011101010111011
1000100000130011
1111111111111111
1111111111111111
4
1111111111111111
1200100000000011
1011101110111011
1000001010101011
1111111011101011
1000100010000011
1010101010111111
1010001010001011
1011111011101011
1000100010100011
1110101110111111
1010100000130011
1010111111111011
1000000000000011
1111111111111111
1111111111111111
5
1111111111111111
1210000000100011
1010111011101011
1010100010001011
1011101010111011
1000001010001011
1111111011111011
1000100010000011
1011101010111011
1010001000001011
1010101011111111
1010101000000011
1010101110111011
1000100010001311
1111111111111111
1111111111111111
6
1111111111111111
1210001010000011
1010101010111111
1010100000100011
1010111111101011
1000100000001011
1110101111111011
1000100000001011
1011101111101011
1000101000101011
1110101010111011
1010100010100011
1010111110101111
1000000000100311
1111111111111111
1111111111111111
7
1111111111111111
1210000000000011
1011101111111011
1000101010000011
1110101010111011
1000001000101011
1010111111101111
1010100000100011
1011101110101111
1000001000100011
1111111011111011
1000100010001011
1010101110111011
1010001300000011
1111111111111111
1111111111111111
8
1111111111111111
1200000010000011
1111111010111011
1000000010001011
1011111111111011
1010000000000011
1010111111101011
1010000000001011
1010111011111011
1000100010001011
1111111011101011
1000001000100011
1110111110101011
1000000000101311
1111111111111111
1111111111111111
9
1111111111111111
1200000000001011
1011111111101011
1000000010001011
1111111010111011
1000100010000011
1011101111111011
1010001000001011
1010111011101011
1010000010101311
1011111110101111
1000100000100011
1011101011111011
1000001000000011
1111111111111111
1111111111111111
10
1111111111111111
1200001000100011
1111101110101011
1000100010001011
1011101111101111
1000100000000011
1110111111101011
1000000010001011
1110111011101011
1010001000001011
1010101111111011
1000101010000011
1010101010101111
1010100000100311
1111111111111111
1111111111111111
 
*/
